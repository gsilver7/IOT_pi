{"version":3,"file":"chunk.js","sourceRoot":"","sources":["../../../../sctp/src/chunk.ts"],"names":[],"mappings":"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","sourcesContent":["// ID Value    Chunk Type\n// -----       ----------\n// 0          - Payload Data (DATA)\n// 1          - Initiation (INIT)\n// 2          - Initiation Acknowledgement (INIT ACK)\n// 3          - Selective Acknowledgement (SACK)\n// 4          - Heartbeat Request (HEARTBEAT)\n// 5          - Heartbeat Acknowledgement (HEARTBEAT ACK)\n// 6          - Abort (ABORT)\n// 7          - Shutdown (SHUTDOWN)\n// 8          - Shutdown Acknowledgement (SHUTDOWN ACK)\n// 9          - Operation Error (ERROR)\n// 10         - State Cookie (COOKIE ECHO)\n// 11         - Cookie Acknowledgement (COOKIE ACK)\n// 12         - Reserved for Explicit Congestion Notification Echo\n//              (ECNE)\n// 13         - Reserved for Congestion Window Reduced (CWR)\n// 14         - Shutdown Complete (SHUTDOWN COMPLETE)\n// 15 to 62   - available\n// 63         - reserved for IETF-defined Chunk Extensions\n// 64 to 126  - available\n// 127        - reserved for IETF-defined Chunk Extensions\n// 128 to 190 - available\n// 191        - reserved for IETF-defined Chunk Extensions\n// 192 to 254 - available\n// 255        - reserved for IETF-defined Chunk Extensions\n\nimport crc32c from \"turbo-crc32/crc32c.js\";\n\nexport class Chunk {\n  public get body(): Buffer | undefined {\n    return this._body;\n  }\n  public set body(value: Buffer | undefined) {\n    this._body = value;\n  }\n  static type = -1;\n\n  constructor(\n    public flags = 0,\n    private _body: Buffer | undefined = Buffer.from(\"\"),\n  ) {}\n\n  get type() {\n    return Chunk.type;\n  }\n\n  get bytes() {\n    if (!this.body) throw new Error();\n\n    const header = Buffer.alloc(4);\n    header.writeUInt8(this.type, 0);\n    header.writeUInt8(this.flags, 1);\n    header.writeUInt16BE(this.body.length + 4, 2);\n\n    const data = Buffer.concat([\n      header,\n      this.body,\n      ...[...Array(padL(this.body.length))].map(() => Buffer.from(\"\\x00\")),\n    ]);\n    return data;\n  }\n}\n\nexport class BaseInitChunk extends Chunk {\n  initiateTag: number;\n  advertisedRwnd: number;\n  outboundStreams: number;\n  inboundStreams: number;\n  initialTsn: number;\n  params: [number, Buffer][];\n\n  constructor(\n    public flags = 0,\n    body?: Buffer,\n  ) {\n    super(flags, body);\n\n    if (body) {\n      this.initiateTag = body.readUInt32BE(0);\n      this.advertisedRwnd = body.readUInt32BE(4);\n      this.outboundStreams = body.readUInt16BE(8);\n      this.inboundStreams = body.readUInt16BE(10);\n      this.initialTsn = body.readUInt32BE(12);\n      this.params = decodeParams(body.slice(16));\n    } else {\n      this.initiateTag = 0;\n      this.advertisedRwnd = 0;\n      this.outboundStreams = 0;\n      this.inboundStreams = 0;\n      this.initialTsn = 0;\n      this.params = [];\n    }\n  }\n\n  get body() {\n    const body = Buffer.alloc(16);\n    body.writeUInt32BE(this.initiateTag, 0);\n    body.writeUInt32BE(this.advertisedRwnd, 4);\n    body.writeUInt16BE(this.outboundStreams, 8);\n    body.writeUInt16BE(this.inboundStreams, 10);\n    body.writeUInt32BE(this.initialTsn, 12);\n    return Buffer.concat([body, encodeParams(this.params)]);\n  }\n}\n\nexport class InitChunk extends BaseInitChunk {\n  static type = 1 as const;\n\n  get type() {\n    return InitChunk.type;\n  }\n}\n\nexport class InitAckChunk extends BaseInitChunk {\n  static type = 2 as const;\n\n  get type() {\n    return InitAckChunk.type;\n  }\n}\n\nexport class ReConfigChunk extends BaseInitChunk {\n  static type = 130 as const;\n\n  get type() {\n    return ReConfigChunk.type;\n  }\n}\n\nexport class ForwardTsnChunk extends Chunk {\n  static type = 192 as const;\n  streams: [number, number][] = [];\n  cumulativeTsn: number;\n\n  constructor(\n    public flags = 0,\n    body: Buffer | undefined,\n  ) {\n    super(flags, body);\n\n    if (body) {\n      this.cumulativeTsn = body.readUInt32BE(0);\n      let pos = 4;\n      while (pos < body.length) {\n        this.streams.push([body.readUInt16BE(pos), body.readUInt16BE(pos + 2)]);\n        pos += 4;\n      }\n    } else {\n      this.cumulativeTsn = 0;\n    }\n  }\n\n  get type() {\n    return ForwardTsnChunk.type;\n  }\n\n  set body(_: Buffer) {}\n\n  get body() {\n    const body = Buffer.alloc(4);\n    body.writeUInt32BE(this.cumulativeTsn, 0);\n    return Buffer.concat([\n      body,\n      ...this.streams.map(([id, seq]) => {\n        const streamBuffer = Buffer.alloc(4);\n        streamBuffer.writeUInt16BE(id, 0);\n        streamBuffer.writeUInt16BE(seq, 2);\n        return streamBuffer;\n      }),\n    ]);\n  }\n}\n\nexport class DataChunk extends Chunk {\n  static type = 0 as const;\n  get type() {\n    return DataChunk.type;\n  }\n  tsn: number = 0;\n  streamId: number = 0;\n  streamSeqNum: number = 0;\n  protocol: number = 0;\n  userData: Buffer = Buffer.from(\"\");\n  abandoned: boolean = false;\n  acked: boolean = false;\n  misses: number = 0;\n  retransmit: boolean = false;\n  sentCount: number = 0;\n  bookSize: number = 0;\n  expiry?: number;\n  maxRetransmits?: number;\n  sentTime?: number;\n\n  constructor(\n    public flags = 0,\n    body: Buffer | undefined,\n  ) {\n    super(flags, body);\n    if (body) {\n      this.tsn = body.readUInt32BE(0);\n      this.streamId = body.readUInt16BE(4);\n      this.streamSeqNum = body.readUInt16BE(6);\n      this.protocol = body.readUInt32BE(8);\n      this.userData = body.slice(12);\n    }\n  }\n\n  get bytes() {\n    const length = 16 + this.userData.length;\n    const header = Buffer.alloc(16);\n    header.writeUInt8(this.type, 0);\n    header.writeUInt8(this.flags, 1);\n    header.writeUInt16BE(length, 2);\n    header.writeUInt32BE(this.tsn, 4);\n    header.writeUInt16BE(this.streamId, 8);\n    header.writeUInt16BE(this.streamSeqNum, 10);\n    header.writeUInt32BE(this.protocol, 12);\n\n    let data = Buffer.concat([header, this.userData]);\n    if (length % 4) {\n      data = Buffer.concat([\n        data,\n        ...[...Array(padL(length))].map(() => Buffer.from(\"\\x00\")),\n      ]);\n    }\n    return data;\n  }\n}\n\nexport class CookieEchoChunk extends Chunk {\n  static type = 10 as const;\n\n  get type() {\n    return CookieEchoChunk.type;\n  }\n}\n\nexport class CookieAckChunk extends Chunk {\n  static type = 11 as const;\n\n  get type() {\n    return CookieAckChunk.type;\n  }\n}\n\nexport class BaseParamsChunk extends Chunk {\n  params: [number, Buffer][] = [];\n  constructor(\n    public flags = 0,\n    body: Buffer | undefined = undefined,\n  ) {\n    super(flags, body);\n    if (body) {\n      this.params = decodeParams(body);\n    }\n  }\n\n  get body() {\n    return encodeParams(this.params);\n  }\n}\n\nexport class AbortChunk extends BaseParamsChunk {\n  static type = 6 as const;\n\n  get type() {\n    return AbortChunk.type;\n  }\n}\n\nexport class ErrorChunk extends BaseParamsChunk {\n  static type = 9 as const;\n  static readonly CODE = {\n    InvalidStreamIdentifier: 1,\n    MissingMandatoryParameter: 2,\n    StaleCookieError: 3,\n    OutofResource: 4,\n    UnresolvableAddress: 5,\n    UnrecognizedChunkType: 6,\n    InvalidMandatoryParameter: 7,\n    UnrecognizedParameters: 8,\n    NoUserData: 9,\n    CookieReceivedWhileShuttingDown: 10,\n    RestartofanAssociationwithNewAddresses: 11,\n    UserInitiatedAbort: 12,\n    ProtocolViolation: 13,\n  } as const;\n\n  get type() {\n    return ErrorChunk.type;\n  }\n\n  get descriptions() {\n    return this.params.map(([code, body]) => {\n      const name = (Object.entries(ErrorChunk.CODE).find(\n        ([, num]) => num === code,\n      ) || [])[0];\n      return { name, body };\n    });\n  }\n}\n\nexport class HeartbeatChunk extends BaseParamsChunk {\n  static type = 4 as const;\n\n  get type() {\n    return HeartbeatChunk.type;\n  }\n}\n\nexport class HeartbeatAckChunk extends BaseParamsChunk {\n  static type = 5 as const;\n\n  get type() {\n    return HeartbeatAckChunk.type;\n  }\n}\n\n// https://tools.ietf.org/html/rfc6525#section-3.1\n// chunkReconfig represents an SCTP Chunk used to reconfigure streams.\n//\n//  0                   1                   2                   3\n//  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// | Type = 130    |  Chunk Flags  |      Chunk Length             |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// \\                                                               \\\n// /                  Re-configuration Parameter                   /\n// \\                                                               \\\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// \\                                                               \\\n// /             Re-configuration Parameter (optional)             /\n// \\                                                               \\\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\nexport class ReconfigChunk extends BaseParamsChunk {\n  static type = 130 as const;\n\n  get type() {\n    return ReconfigChunk.type;\n  }\n}\n\nexport class SackChunk extends Chunk {\n  static type = 3;\n  get type() {\n    return SackChunk.type;\n  }\n\n  gaps: [number, number][] = [];\n  duplicates: number[] = [];\n  cumulativeTsn = 0;\n  advertisedRwnd = 0;\n\n  constructor(\n    public flags = 0,\n    body: Buffer | undefined,\n  ) {\n    super(flags, body);\n\n    if (body) {\n      this.cumulativeTsn = body.readUInt32BE(0);\n      this.advertisedRwnd = body.readUInt32BE(4);\n      const nbGaps = body.readUInt16BE(8);\n      const nbDuplicates = body.readUInt16BE(10);\n\n      let pos = 12;\n\n      [...Array(nbGaps)].forEach(() => {\n        this.gaps.push([body.readUInt16BE(pos), body.readUInt16BE(pos + 2)]);\n        pos += 4;\n      });\n\n      [...Array(nbDuplicates)].forEach(() => {\n        this.duplicates.push(body.readUInt32BE(pos));\n        pos += 4;\n      });\n    }\n  }\n\n  get bytes() {\n    const length = 16 + 4 * (this.gaps.length + this.duplicates.length);\n    const header = Buffer.alloc(16);\n    header.writeUInt8(this.type, 0);\n    header.writeUInt8(this.flags, 1);\n    header.writeUInt16BE(length, 2);\n    header.writeUInt32BE(this.cumulativeTsn, 4);\n    header.writeUInt32BE(this.advertisedRwnd, 8);\n    header.writeUInt16BE(this.gaps.length, 12);\n    header.writeUInt16BE(this.duplicates.length, 14);\n\n    let data = Buffer.concat([\n      header,\n      ...this.gaps.map((gap) => {\n        const gapBuffer = Buffer.alloc(4);\n        gapBuffer.writeUInt16BE(gap[0], 0);\n        gapBuffer.writeUInt16BE(gap[1], 2);\n        return gapBuffer;\n      }),\n    ]);\n    data = Buffer.concat([\n      data,\n      ...this.duplicates.map((tsn) => {\n        const tsnBuffer = Buffer.alloc(4);\n        tsnBuffer.writeUInt32BE(tsn, 0);\n        return tsnBuffer;\n      }),\n    ]);\n    return data;\n  }\n}\n\nexport class ShutdownChunk extends Chunk {\n  static type = 7;\n  get type() {\n    return ShutdownChunk.type;\n  }\n\n  cumulativeTsn = 0;\n\n  constructor(\n    public flags = 0,\n    body: Buffer | undefined,\n  ) {\n    super(flags, body);\n\n    if (body) {\n      this.cumulativeTsn = body.readUInt32BE(0);\n    }\n  }\n\n  get body() {\n    const body = Buffer.alloc(4);\n    body.writeUInt32BE(this.cumulativeTsn, 0);\n    return body;\n  }\n}\n\nexport class ShutdownAckChunk extends Chunk {\n  static type = 8;\n  get type() {\n    return ShutdownAckChunk.type;\n  }\n}\n\nexport class ShutdownCompleteChunk extends Chunk {\n  static type = 14;\n  get type() {\n    return ShutdownCompleteChunk.type;\n  }\n}\n\nconst CHUNK_CLASSES: (typeof Chunk)[] = [\n  DataChunk,\n  InitChunk,\n  InitAckChunk,\n  SackChunk,\n  HeartbeatChunk,\n  HeartbeatAckChunk,\n  AbortChunk,\n  ShutdownChunk,\n  ShutdownAckChunk,\n  ErrorChunk,\n  CookieEchoChunk,\n  CookieAckChunk,\n  ShutdownCompleteChunk,\n  ReconfigChunk,\n  ForwardTsnChunk,\n];\n\nexport const CHUNK_BY_TYPE = CHUNK_CLASSES.reduce(\n  (acc: { [key: string]: typeof Chunk }, cur) => {\n    acc[cur.type] = cur;\n    return acc;\n  },\n  {},\n);\n\nfunction padL(l: number) {\n  const m = l % 4;\n  return m ? 4 - m : 0;\n}\n\nfunction encodeParams(params: [number, Buffer][]) {\n  let body = Buffer.from(\"\");\n  let padding = Buffer.from(\"\");\n  params.forEach(([type, value]) => {\n    const length = value.length + 4;\n    const paramHeader = Buffer.alloc(4);\n    paramHeader.writeUInt16BE(type, 0);\n    paramHeader.writeUInt16BE(length, 2);\n    body = Buffer.concat([body, padding, paramHeader, value]);\n    padding = Buffer.concat(\n      [...Array(padL(length))].map(() => Buffer.from(\"\\x00\")),\n    );\n  });\n  return body;\n}\n\nexport function decodeParams(body: Buffer): [number, Buffer][] {\n  const params: [number, Buffer][] = [];\n  let pos = 0;\n  while (pos <= body.length - 4) {\n    const type = body.readUInt16BE(pos);\n    const length = body.readUInt16BE(pos + 2);\n    params.push([type, body.slice(pos + 4, pos + length)]);\n    pos += length + padL(length);\n  }\n  return params;\n}\n\nexport function parsePacket(data: Buffer): [number, number, number, Chunk[]] {\n  if (data.length < 12)\n    throw new Error(\"SCTP packet length is less than 12 bytes\");\n\n  const sourcePort = data.readUInt16BE(0);\n  const destinationPort = data.readUInt16BE(2);\n  const verificationTag = data.readUInt32BE(4);\n\n  const checkSum = data.readUInt32LE(8);\n\n  const expect = crc32c(\n    Buffer.concat([\n      data.slice(0, 8),\n      Buffer.from(\"\\x00\\x00\\x00\\x00\"),\n      data.slice(12),\n    ]),\n  );\n\n  if (checkSum !== expect) throw new Error(\"SCTP packet has invalid checksum\");\n\n  const chunks: Chunk[] = [];\n  let pos = 12;\n  while (pos + 4 <= data.length) {\n    const chunkType = data.readUInt8(pos);\n    const chunkFlags = data.readUInt8(pos + 1);\n    const chunkLength = data.readUInt16BE(pos + 2);\n    const chunkBody = data.slice(pos + 4, pos + chunkLength);\n    const ChunkClass = CHUNK_BY_TYPE[chunkType.toString()];\n    if (ChunkClass) {\n      chunks.push(new ChunkClass(chunkFlags, chunkBody));\n    } else {\n      throw new Error(\"unknown\");\n    }\n    pos += chunkLength + padL(chunkLength);\n  }\n  return [sourcePort, destinationPort, verificationTag, chunks];\n}\n\nexport function serializePacket(\n  sourcePort: number,\n  destinationPort: number,\n  verificationTag: number,\n  chunk: Chunk,\n) {\n  const header = Buffer.alloc(8);\n  header.writeUInt16BE(sourcePort, 0);\n  header.writeUInt16BE(destinationPort, 2);\n  header.writeUInt32BE(verificationTag, 4);\n\n  const body = chunk.bytes;\n\n  const checksum: number = crc32c(\n    Buffer.concat([header, Buffer.from(\"\\x00\\x00\\x00\\x00\"), body]),\n  );\n  const checkSumBuf = Buffer.alloc(4);\n  checkSumBuf.writeUInt32LE(checksum, 0);\n\n  const packet = Buffer.concat([header, checkSumBuf, body]);\n\n  return packet;\n}\n"]}